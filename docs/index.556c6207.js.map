{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-0ef5d98435b4b5e4.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-206b310de87487bd.js","node_modules/@parcel/runtime-js/lib/runtime-7fc588b0fb039abf.js","node_modules/@parcel/runtime-js/lib/runtime-a7ec7cd95d444ee5.js","node_modules/@parcel/runtime-js/lib/runtime-0195c02516b1de66.js","node_modules/@parcel/runtime-js/lib/runtime-c21606d3b946d0e5.js","src/constants/rebuses.js","src/js/timer.js","node_modules/@parcel/runtime-js/lib/runtime-aa23f7e159945d63.js","src/js/index.js","src/js/quest.js","src/constants/settings.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bparW\\\":\\\"index.556c6207.js\\\",\\\"lkOGK\\\":\\\"puzzle1.9bde11af.png\\\",\\\"a1AoH\\\":\\\"puzzle2.c4f28512.jpeg\\\",\\\"rCnLT\\\":\\\"puzzle3.1d9a0bb7.png\\\",\\\"hZsin\\\":\\\"puzzle4.8cf7f628.png\\\",\\\"e2Xqw\\\":\\\"puzzle5.8665d590.png\\\",\\\"ceMJn\\\":\\\"success.ea74ed94.png\\\"}\"));","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./helpers/bundle-url').getBundleURL('bparW') + require('./helpers/bundle-manifest').resolve(\"lkOGK\");","module.exports = require('./helpers/bundle-url').getBundleURL('bparW') + require('./helpers/bundle-manifest').resolve(\"a1AoH\");","module.exports = require('./helpers/bundle-url').getBundleURL('bparW') + require('./helpers/bundle-manifest').resolve(\"rCnLT\");","module.exports = require('./helpers/bundle-url').getBundleURL('bparW') + require('./helpers/bundle-manifest').resolve(\"hZsin\");","module.exports = require('./helpers/bundle-url').getBundleURL('bparW') + require('./helpers/bundle-manifest').resolve(\"e2Xqw\");","import puzzle1 from '../../assets/puzzle1.png';\nimport puzzle2 from '../../assets/puzzle2.jpeg';\nimport puzzle3 from '../../assets/puzzle3.png';\nimport puzzle4 from '../../assets/puzzle4.png';\nimport puzzle5 from '../../assets/puzzle5.png';\n\nexport const rebuses = [\n  { image: puzzle1, answer: 'блокчейн' },\n  { image: puzzle2, answer: 'джуниор девелопер' },\n  { image: puzzle3, answer: 'туториал' },\n  { image: puzzle4, answer: 'хакатон' },\n  { image: puzzle5, answer: 'фронтенд' },\n];\n","export class Timer {\n  constructor() {\n    this.ticker = null;\n    this.timeInSecs = 0;\n    this.callback = undefined;\n    this.countdownendEvent = new CustomEvent('countdownend');\n  }\n\n  start(secs, callback) {\n    this.callback = callback;\n    this.timeInSecs = parseInt(secs);\n    this.ticker = setInterval(() => this.tick(), 1000);\n  }\n\n  tick() {\n    let secs = this.timeInSecs;\n\n    if (secs > 0) {\n      this.timeInSecs--;\n    } else {\n      document.dispatchEvent(this.countdownendEvent);\n      this.stop();\n    }\n\n    const mins = Math.floor(secs / 60);\n    secs %= 60;\n    const pretty = ((mins < 10) ? '0' : '') + mins + ':' + ((secs < 10) ? '0' : '') + secs;\n\n    if (this.callback) {\n      this.callback(pretty);\n    }\n  }\n\n  stop() {\n    clearInterval(this.ticker);\n  }\n}\n\n","module.exports = require('./helpers/bundle-url').getBundleURL('bparW') + require('./helpers/bundle-manifest').resolve(\"ceMJn\");","import { rebuses } from '../constants';\nimport { Quest } from './quest';\n\nconst quest = new Quest();\n\nquest.init(rebuses);\n","import { TIMER_DURATION } from '../constants/settings';\nimport { Timer } from './timer';\nimport successImage from '../../assets/success.png';\n\nexport class Quest {\n  constructor() {\n    this.startButton = null;\n    this.countdown = null;\n    this.questWrapper = null;\n    this.rebuses = [];\n    this.rebusImage = null;\n    this.form = null;\n    this.variantInput = null;\n    this.progressWrapper = null;\n    this.wastedWrapper = null;\n    this.successWrapper = null;\n    this.step = 0;\n    this.isValidAnswer = false;\n\n    this.timer = new Timer();\n  }\n\n  init(rebuses) {\n    const startButton = document.getElementById('start-btn');\n    const countdown = document.getElementById('countdown');\n    const questWrapper = document.getElementById('quest');\n    const rebusImage = document.getElementById('rebus-image');\n    const form = document.getElementById('quest-form');\n    const variantInput = document.getElementById('variant-field');\n    const progressWrapper = document.getElementById('progress');\n    const wastedWrapper = document.getElementById('wasted');\n    const successWrapper = document.getElementById('success');\n\n    this.startButton = startButton;\n    this.countdown = countdown;\n    this.questWrapper = questWrapper;\n    this.rebuses = rebuses;\n    this.rebusImage = rebusImage;\n    this.form = form;\n    this.variantInput = variantInput;\n    this.progressWrapper = progressWrapper;\n    this.wastedWrapper = wastedWrapper;\n    this.successWrapper = successWrapper;\n\n    this.start();\n  }\n\n  start() {\n    this.subscribeStartButton();\n    this.updateProgressBar();\n    this.subscribeOnFormChange();\n    this.subscribeTimeEnd();\n  }\n\n  subscribeTimeEnd() {\n    document.addEventListener('countdownend', () => {\n      this.hideQuest();\n      this.wastedWrapper.classList.remove('invisible');\n    });\n  }\n\n  subscribeStartButton() {\n    if (!this.startButton) {\n      return null;\n    }\n\n    this.startButton.addEventListener('click', (event) => {\n      event.target.remove();\n      this.showQuest();\n\n      this.timer.start(TIMER_DURATION, (pretty) => this.timerHandler(pretty));\n    });\n  }\n\n  timerHandler(pretty) {\n    if (this.countdown) {\n      this.countdown.textContent = pretty;\n    }\n  }\n\n  subscribeOnFormChange() {\n    if (!this.form) {\n      return;\n    }\n\n    this.form.addEventListener('submit', (event) => {\n      event.preventDefault();\n\n      const formData = new FormData(event.target);\n      const variantValue = formData.get('variant');\n\n      if (!this.variantInput) {\n        return;\n      }\n\n      this.validateAnswerField(variantValue);\n\n      if (!this.isValidAnswer) {\n        return;\n      }\n\n      this.nextStep();\n      setTimeout(() => this.resetValidation(this.variantInput), 1000);\n    });\n  }\n\n  validateAnswerField(value) {\n    if (value.toLowerCase() !== this.rebuses[this.step].answer) {\n      this.variantInput.classList.remove('is-valid');\n      this.variantInput.classList.add('is-invalid');\n\n      this.isValidAnswer = false;\n    } else {\n      this.variantInput.classList.remove('is-invalid');\n      this.variantInput.classList.add('is-valid');\n\n      this.isValidAnswer = true;\n    }\n  }\n\n  nextStep() {\n    this.resetVariantInputValue();\n    this.step += 1;\n    this.updateProgressBar();\n\n    if (this.isLastStep()) {\n      this.timer.stop();\n      this.hideQuest();\n      this.showSuccessScreen();\n\n      return;\n    }\n\n    this.nextRebus();\n  }\n\n  resetVariantInputValue() {\n    if (!this.variantInput) {\n      return;\n    }\n\n    this.variantInput.value = '';\n  }\n\n  nextRebus() {\n    if (this.isLastStep()) {\n      return;\n    }\n\n    this.rebusImage.src = this.rebuses[this.step].image;\n  }\n\n  isLastStep() {\n    return this.step === this.rebuses.length;\n  }\n\n  resetValidation(element) {\n    if (!element) {\n      return;\n    }\n\n    element.classList.remove('is-valid');\n    element.classList.remove('is-invalid');\n    this.isValidAnswer = false;\n  }\n\n  hideQuest() {\n    this.questWrapper.classList.add('invisible');\n  }\n\n  showQuest() {\n    this.questWrapper.classList.remove('invisible');\n  }\n\n  showSuccessScreen() {\n    const image = document.createElement('img');\n    const title = document.createElement('h6');\n    const clue = document.createElement('mark');\n\n    image.src = successImage;\n    image.width = 760;\n    image.height = 230;\n    image.classList.add('img-fluid');\n\n    title.textContent = 'Кодовое слово состоит из следующих букв';\n    title.classList.add('display-6');\n\n    clue.textContent = 'И Н П О Т';\n    clue.classList.add('badge');\n    clue.classList.add('bg-success');\n\n    this.successWrapper.appendChild(image);\n\n    setTimeout(() => {\n      image.remove();\n      this.successWrapper.appendChild(title);\n      this.successWrapper.appendChild(clue);\n    }, 2000);\n  }\n\n  updateProgressBar() {\n    const rebusesCount = this.rebuses.length;\n    const field = document.getElementById('progress-field');\n    const currentProgress = this.step / rebusesCount * 100;\n\n    field.innerText = `${this.step === 0 ? 0 : this.step}/${rebusesCount}`;\n    field.style.width = `${currentProgress}%`;\n  }\n}\n","export const TIMER_DURATION = 180;\n"],"names":["$8b4d1930797b255e$export$6503ec6e8aabbaf","$8b4d1930797b255e$export$f7ad0328861e2f03","$8b4d1930797b255e$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$f29cd6c67ea13581$export$bdfd709ae4826697","$f29cd6c67ea13581$var$bundleURL","$f29cd6c67ea13581$var$getBaseURL","url","replace","value","err","matches","stack","match","$f29cd6c67ea13581$var$getBundleURL","$2783ca33fce2e195$exports","getBundleURL","resolve","$3f97d99f5aba41c3$exports","$d10d2f3d197b55b3$exports","$1aa9bb56ddabaa9e$exports","$fe86cbabcefa75a3$exports","$89f09fe595a01e95$export$15c67efd89b47f94","image","$parcel$interopDefault","answer","$e3af6e46ba00a6e5$export$c57e9b2d8b9e4de","this","ticker","timeInSecs","callback","undefined","countdownendEvent","CustomEvent","start","secs","parseInt","setInterval","tick","document","dispatchEvent","stop","mins","Math","floor","pretty","clearInterval","$85577dd84be563bd$exports","startButton","countdown","questWrapper","rebuses","rebusImage","form","variantInput","progressWrapper","wastedWrapper","successWrapper","step","isValidAnswer","timer","init","getElementById","subscribeStartButton","updateProgressBar","subscribeOnFormChange","subscribeTimeEnd","addEventListener","hideQuest","classList","remove","event","target","showQuest","timerHandler","textContent","preventDefault","variantValue","FormData","get","validateAnswerField","nextStep","setTimeout","resetValidation","toLowerCase","add","resetVariantInputValue","isLastStep","showSuccessScreen","nextRebus","src","element","createElement","title","clue","width","height","appendChild","rebusesCount","field","currentProgress","innerText","style"],"version":3,"file":"index.556c6207.js.map"}